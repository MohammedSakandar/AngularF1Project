

<!--@if ((f1Service.results$ | async); as results) {-->
<!--  @if (results.MRData) {-->
<!--    <table>-->
<!--      <thead>-->
<!--      <tr>-->
<!--        <th>Position</th>-->
<!--        <th>Flag</th>-->
<!--        <th>Driver Name</th>-->
<!--        <th>Time</th>-->
<!--      </tr>-->
<!--      </thead>-->
<!--      <tbody>-->
<!--        @for (race of results.MRData.RaceTable.Races; track race.round) {-->
<!--          @for (result of race.Results; track result.Driver) {-->
<!--            <tr>-->
<!--              <td>{{ result.position }}</td>-->
<!--              <td><img-->
<!--                src="https://flagsapi.com/{{ f1Service.countryList[result.Driver.nationality] }}/flat/64.png"-->
<!--                alt="Flag"></td>-->
<!--              <td>{{ result.Driver.givenName }} {{ result.Driver.familyName }}</td>-->
<!--              <td>{{ result.Time ? result.Time.time : "DNF" }}</td>-->
<!--            </tr>-->
<!--          }-->
<!--        }-->
<!--      </tbody>-->
<!--    </table>-->
<!--  }-->
<!--}-->

<!--@if ((f1Service.results$ | async); as results) {-->
<!--  @if (results.MRData) {-->
<!--    <table class="mat-table">-->
<!--      <thead>-->
<!--      <tr>-->
<!--        <th mat-header-cell>Position</th>-->
<!--        <th mat-header-cell>Flag</th>-->
<!--        <th mat-header-cell>Driver Name</th>-->
<!--        <th mat-header-cell>Time</th>-->
<!--      </tr>-->
<!--      </thead>-->
<!--      <tbody>-->
<!--        @for (race of results.MRData.RaceTable.Races; track race.round) {-->
<!--          @for (result of race.Results; track result.Driver) {-->
<!--          <tr mat-row [class.odd-row]="convertToNumber(race.round) % 2 === 0">-->
<!--            <td mat-cell>{{ result.position }}</td>-->
<!--            <td mat-cell><img src="https://flagsapi.com/{{ f1Service.countryList[result.Driver.nationality] }}/flat/64.png" alt="Flag"></td>-->
<!--            <td mat-cell>{{ result.Driver.givenName }} {{ result.Driver.familyName }}</td>-->
<!--            <td mat-cell>{{ result.Time ? result.Time.time : 'DNF' }}</td>-->
<!--          </tr>-->
<!--        }-->
<!--      }-->
<!--      </tbody>-->
<!--    </table>-->
<!--  }-->
<!--}-->

@if ((f1Service.results$|async); as results) {
  @if (results.MRData) {


    <ng-container matColumnDef="headerRow">
      <tr mat-header-row *matHeaderRowDef="['Results','Final']; sticky: true;"></tr>
    </ng-container>
    @for (race of results.MRData.RaceTable.Races; track race.round) {
      <table mat-table class="mat-elevation-z8" [dataSource]="race.Results">

        <ng-container matColumnDef="position">
          <th mat-header-cell *matHeaderCellDef>Position</th>
          <td mat-cell *matCellDef="let result">
            {{ result.position }}
          </td>
        </ng-container>

        <ng-container matColumnDef="nationality">
          <th mat-header-cell *matHeaderCellDef>Nationality</th>
          <td mat-cell *matCellDef="let result">
            <img
              src="https://flagsapi.com/{{ f1Service.countryList[result.Driver.nationality] }}/flat/64.png"
              alt="Flag">
          </td>

        </ng-container>

        <ng-container matColumnDef="driver">
          <th mat-header-cell *matHeaderCellDef>Driver</th>
          <td mat-cell *matCellDef="let result">
            <div style="display: flex; align-items: center;">

              <div style="display: flex; flex-direction: column;">
                <div>{{ result.Driver.givenName }} {{ result.Driver.familyName }}</div>
                <div
                  style="font-size: 12px; color: gray;">{{ result.Constructor.name }} {{ result.number }}
                </div>
              </div>
            </div>
          </td>
        </ng-container>

        <ng-container matColumnDef="time">
          <th mat-header-cell *matHeaderCellDef>Time</th>
          <td mat-cell *matCellDef="let result">
            @if (result.Time) {
              {{ result.Time.time }}
            } @else {
              DNF: {{ result.status }}
            }
          </td>
        </ng-container>

        <ng-container matColumnDef="points">
          <th mat-header-cell *matHeaderCellDef>Pts</th>
          <td mat-cell *matCellDef="let result">{{ result.points }}</td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>
    }
  }
}



